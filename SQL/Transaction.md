## 트랜잭션의 개념

트랜잭션은 데이터베이스 연산들의 순차적 집합으로, ACID 속성을 만족합니다. 이는 데이터의 일관된 변경과 일관된 데이터 뷰를 보장하는 것을 의미합니다.

구체적으로 트랜잭션은 다음과 같은 특징을 가지고 있습니다.

- **일관된 데이터 변경과 뷰**
    트랜잭션은 데이터를 안정적이고 일관된 상태에서 변경해야 하며, 이러한 변경이 데이터베이스 전체에 일관성 있게 반영되어야 합니다.
- **동시성 제어**
    트랜잭션은 동시에 실행될 때도 데이터의 일관성과 정확성을 유지해야 합니다. 동시성 제어 없이 100% 동시 접근을 허용하면 여러 가지 문제가 발생할 수도 있습니다.

## 트랜잭션의 성질(ACID)
- **원자성(Atomicity)**
    트랜잭션 내의 모든 작업들은 **‘All of nothing’**과 같이 실행되어야 합니다. 즉, 완전히 수행되거나 전혀 수행되어야 하지 않아야 함을 의미합니다.
> - 현재의 트랜잭션을 작게 분할하는 명령어
> - 저장된 savapoint는 ROLLBACK TO SAVEPOINT 명령어를 사용하여 지정된 savepoint까지 ROLLBACK 할 수 있음.

- **일관성(Consistency)**
    트랜잭션이 데이터베이스의 일관된 상태를 유지해야 함을 의미합니다.
    트랜잭션 전후에 데이터베이스는 정의된 규칙, 제약 조건, 트리거 등을 준수하는 일관된 상태를 유지해야 합니다.

- **고립성(Isolation)**
    동시에 실행되는 트랜잭션이 서로에게 영향을 주지 않아야 함을 의미합니다. 이는 트랜잭션이 마치 순차적으로 실행되는 것처럼 관리되어야 함을 의미합니다.
    여러 트랜잭션이 동시에 실행될 때, 각 트랜잭션은 서로 독립적으로 실행되는 것처럼 결과를 보장해야 합니다.

- **지속성(Durability)** 
    트랜잭션이 성공적으로 완료되면, 시스템 오류, 충돌, 전원 손실 등이 발생하더라도 그 결과는 영구적으로 데이터베이스에 반영되어야 합니다.
```sql
예시) 사용자 A가 사용자 B에게 1만원을 송금한다

1. 사용자 A의 계좌에서 1만원을 차감한다:
   UPDATE accounts SET balance = balance - 10000 WHERE user = 'A';

2. 사용자 B의 계좌에 1만원을 추가한다:
   UPDATE accounts SET balance = balance + 10000 WHERE user = 'B';

작업 단위: 출금 UPDATE + 입금 UPDATE
=> 이 두 쿼리문은 하나의 트랜잭션으로 묶여, 두 작업이 모두 성공적으로 완료되어야만 함.
- 만약 중간에 오류가 발생하면, 이미 진행된 작업은 취소(롤백)되어야 함.
```

## 트랜잭션 연산 및 상태

## 트랜잭션 주의점